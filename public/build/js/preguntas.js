!function(){!async function(){try{const t="/api/preguntas",n=await fetch(t),a=await n.json();e=a.preguntas,o()}catch(e){console.log(e)}}();let e=[],t=[];function n(n){const a=n.target.value;t=""!==a?e.filter(e=>e.estado===a):[],o()}document.querySelectorAll('#filtros input[type="radio"]').forEach(e=>{e.addEventListener("input",n)});const a={0:"Pendiente",1:"Completa"};function o(){!function(){const e=document.querySelector("#listado-preguntas");for(;e.firstChild;)e.removeChild(e.firstChild)}(),function(){const t=e.filter(e=>"0"===e.estado),n=document.querySelector("#pendientes");0===t.length?n.disabled=!0:n.disabled=!1}(),function(){const t=e.filter(e=>"1"===e.estado),n=document.querySelector("#completadas");0===t.length?n.disabled=!0:n.disabled=!1}();const n=t.length?t:e;if(0===n.lenght){const e=document.querySelector("#listado-preguntas"),t=document.createElement("LI");return t.textContent="No hay preguntas",t.classList.add("no-preguntas"),void e.appendChild(t)}n.forEach(t=>{const n=document.createElement("LI");n.dataset.preguntaId=t.id,n.classList.add("pregunta");const s=document.createElement("P");s.textContent=t.titulo;const d=document.createElement("DIV");d.classList.add("opciones");const c=document.createElement("BUTTON");c.classList.add("estado-pregunta"),c.classList.add(""+a[t.estado].toLowerCase()),c.textContent=a[t.estado],c.dataset.estadoPregunta=t.estado,c.onclick=function(){!function(t){const n="1"===t.estado?"0":"1";t.estado=n,async function(t){const{descripcion:n,estado:a,estandar_id:s,id:d,respuesta:c,titulo:r,url:i,usuarios_id:u}=t,l=new FormData;l.append("id",d),l.append("titulo",r),l.append("descripcion",n),l.append("respuesta",c),l.append("url",i),l.append("estado",a),l.append("estandar_id",s),l.append("usuarios_id",u);try{const t="http://localhost:3000/api/preguntas/actualizar",n=await fetch(t,{method:"POST",body:l}),s=await n.json();"exito"===s.respuesta.tipo&&(!function(e,t,n){const a=document.querySelector(".alerta");a&&a.remove();const o=document.createElement("DIV");o.classList.add("alerta",t),o.textContent=e,n.parentElement.insertBefore(o,n.nextElementSibling),setTimeout(()=>{o.remove()},5e3)}(s.respuesta.mensaje,s.respuesta.tipo,document.querySelector(".contenedor-preguntas")),e=e.map(e=>(e.id===d&&(e.estado=a),e)),o())}catch(e){console.log(e)}}(t)}({...t})};const r=document.createElement("BUTTON");r.classList.add("responder-pregunta"),r.dataset.idPregunta=t.id,r.textContent="Responder",d.appendChild(c),d.appendChild(r),n.append(s),n.append(d);document.querySelector("#listado-preguntas").appendChild(n)})}}();